# Production Environment Configuration for Opside Backend

# Database Configuration
DB_TYPE=postgresql
DB_URL=postgresql://postgres:your-password@db.your-project.supabase.co:5432/postgres
DB_NAME=opside_fba
DB_USER=postgres
DB_PASSWORD=your-supabase-password

# Application Configuration
ENV=production
FRONTEND_URL=https://your-frontend-domain.com

# Amazon OAuth Configuration
AMAZON_CLIENT_ID=your-amazon-client-id
AMAZON_CLIENT_SECRET=your-amazon-client-secret
AMAZON_REDIRECT_URI=https://opside-main-api.fly.dev/api/auth/amazon/callback

# Evidence Sources OAuth Configuration
GMAIL_CLIENT_ID=your-gmail-client-id
GMAIL_CLIENT_SECRET=your-gmail-client-secret
GMAIL_REDIRECT_URI=https://opside-main-api.fly.dev/api/auth/callback/gmail

OUTLOOK_CLIENT_ID=your-outlook-client-id
OUTLOOK_CLIENT_SECRET=your-outlook-client-secret
OUTLOOK_REDIRECT_URI=https://opside-main-api.fly.dev/api/auth/callback/outlook

GDRIVE_CLIENT_ID=your-gdrive-client-id
GDRIVE_CLIENT_SECRET=your-gdrive-client-secret
GDRIVE_REDIRECT_URI=https://opside-main-api.fly.dev/api/auth/callback/gdrive

DROPBOX_CLIENT_ID=your-dropbox-client-id
DROPBOX_CLIENT_SECRET=your-dropbox-client-secret
DROPBOX_REDIRECT_URI=https://opside-main-api.fly.dev/api/auth/callback/dropbox

# Evidence Matching Engine Configuration
EVIDENCE_CONFIDENCE_AUTO=0.85
EVIDENCE_CONFIDENCE_PROMPT=0.5
FEATURE_FLAG_EV_AUTO_SUBMIT=True
FEATURE_FLAG_EV_SMART_PROMPTS=True

# Security Configuration
JWT_SECRET=your-super-secret-jwt-key-here-change-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRES_IN_MINUTES=10080
CRYPTO_SECRET=a_very_secret_key_for_encryption_32_bytes

# Internal Python API Service Auth
PYTHON_API_URL=https://python-api-7.onrender.com
PYTHON_API_JWT_SECRET=${JWT_SECRET}
PYTHON_API_JWT_ALGORITHM=HS256
PYTHON_API_JWT_TTL=5m
PYTHON_API_SERVICE_NAME=integrations-service-worker
PYTHON_API_SERVICE_EMAIL=integrations-worker@yourdomain.com
SERVICE_JWT_TTL_MINUTES=60

# Service URLs (Fly.io URLs)
INTEGRATIONS_URL=https://opside-node-api-woco.onrender.com
INTEGRATIONS_API_KEY=your-integrations-api-key
STRIPE_SERVICE_URL=https://opside-stripe-payments.fly.dev
STRIPE_INTERNAL_API_KEY=your-stripe-internal-api-key
COST_DOC_SERVICE_URL=https://opside-cost-docs.fly.dev
REFUND_ENGINE_URL=https://opside-refund-engine.fly.dev
MCDE_URL=https://opside-mcde.fly.dev

# Service Ports
INTEGRATIONS_PORT=3001
PAYMENTS_PORT=4000
COST_DOC_PORT=3003
REFUND_ENGINE_PORT=3002

# Redis Configuration (Upstash)
REDIS_URL=redis://default:your-password@your-redis.upstash.io:6379

# Stripe Configuration
PAYMENTS_STRIPE_SECRET_KEY=sk_live_your_stripe_secret_key
PAYMENTS_STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret
PAYMENTS_STRIPE_CLIENT_ID=ca_your_stripe_client_id
PAYMENTS_STRIPE_PLATFORM_ACCOUNT_ID=acct_your_platform_account_id
PAYMENTS_STRIPE_API_VERSION=2023-10-16
PAYMENTS_STRIPE_PRICE_ID=price_your_price_id
PAYMENTS_STRIPE_LIVE_MODE=true
PAYMENTS_JWT_SECRET=your-payments-jwt-secret

# Integrations Backend Configuration
INTEGRATIONS_SUPABASE_URL=https://your-project.supabase.co
INTEGRATIONS_SUPABASE_ANON_KEY=your-supabase-anon-key
INTEGRATIONS_SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key
INTEGRATIONS_JWT_SECRET=your-integrations-jwt-secret
INTEGRATIONS_RATE_LIMIT_WINDOW_MS=900000
INTEGRATIONS_RATE_LIMIT_MAX_REQUESTS=100

# Cost Documentation Configuration
COST_DOC_DATABASE_URL=postgresql://postgres:your-password@db.your-project.supabase.co:5432/postgres
COST_DOC_JWT_SECRET=your-cost-doc-jwt-secret
COST_DOC_REDIS_URL=redis://default:your-password@your-redis.upstash.io:6379

# Refund Engine Configuration
REFUND_ENGINE_JWT_SECRET=your-refund-engine-jwt-secret
REFUND_ENGINE_ALLOWED_ORIGINS=https://your-frontend-domain.com,https://opside-main-api.fly.dev
REFUND_ENGINE_RATE_LIMIT_WINDOW_MS=900000
REFUND_ENGINE_RATE_LIMIT_MAX_REQUESTS=100
REFUND_ENGINE_ML_API_BASE_URL=https://opside-mcde.fly.dev

# MCDE Configuration
MCDE_DATABASE_URL=postgresql://postgres:your-password@db.your-project.supabase.co:5432/postgres
MCDE_REDIS_URL=redis://default:your-password@your-redis.upstash.io:6379

# AWS S3 Configuration (for evidence storage)
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_REGION=us-east-1
S3_BUCKET_NAME=opside-evidence-bucket
S3_EVIDENCE_PATH=evidence

# Logging Configuration
LOG_LEVEL=info
LOG_FILE=logs/app.log

# Encryption
ENCRYPTION_KEY=your_32_character_encryption_key_here
TOKEN_ENCRYPTION_KEY=your_32_character_token_encryption_key_here

